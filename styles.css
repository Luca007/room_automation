* { box-sizing: border-box; }
:root {
  --bg: #0d1117;
  --bg-alt: #161b22;
  --bg-soft: #1f2733;
  --border: #30363d;
  --border-glow: #2563eb55;
  --text: #f1f5f9;
  --text-dim: #94a3b8;
  --primary: #6366f1;
  --primary-accent: #818cf8;
  --primary-glow: 187 100% 60%;
  --accent: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
  --shadow: 0 4px 12px -2px rgba(0,0,0,.5),0 2px 4px -1px rgba(0,0,0,.4);
  color-scheme: dark;
  font-family: 'Inter', system-ui, sans-serif;
}
html, body { margin:0; padding:0; background: var(--bg); color: var(--text); min-height: 100%; }
body { -webkit-font-smoothing: antialiased; }

h1,h2,h3 { margin:0; font-weight:600; letter-spacing:.5px; }
p { line-height:1.5; }

.view { display:none; }
.view.active { display:flex; }

#auth-view { flex-direction:column; align-items:center; justify-content:center; min-height:100vh; padding:2rem 1rem; background: radial-gradient(circle at 30% 20%, #1e293b 0%, #0d1117 70%); }
.auth-card { width:100%; max-width:380px; background: linear-gradient(145deg,var(--bg-alt), var(--bg-soft)); border:1px solid var(--border); padding:2rem 2.2rem 2.4rem; border-radius:20px; position:relative; box-shadow: var(--shadow); backdrop-filter: blur(8px); }
.auth-card:before { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(120deg,#6366f149,#10b98144,#6366f149); -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none; z-index:0; }
.auth-card > * { position:relative; z-index:1; }
.auth-card h1 { font-size:1.6rem; background:linear-gradient(90deg,#818cf8,#10b981); -webkit-background-clip:text; background-clip:text; color:transparent; }
.subtitle { margin-top:.35rem; color:var(--text-dim); font-size:.9rem; }

form { display:flex; flex-direction:column; gap:1rem; margin-top:1.2rem; }
.field { display:flex; flex-direction:column; gap:.35rem; }
.field label { font-size:.75rem; text-transform:uppercase; letter-spacing:.08em; color:var(--text-dim); font-weight:600; }
.field input { background:var(--bg-soft); border:1px solid var(--border); border-radius:12px; padding:.85rem .95rem; color:var(--text); font-size:.95rem; outline:none; transition:.2s; }
.field input:focus { border-color: var(--primary); box-shadow:0 0 0 3px rgba(99,102,241,.25); }

.tabs { display:grid; grid-template-columns:1fr 1fr; gap:.5rem; background:var(--bg-soft); padding:.4rem; border-radius:14px; border:1px solid var(--border); }
.tab { background:transparent; color:var(--text-dim); border:0; padding:.55rem .75rem; border-radius:10px; font-weight:500; font-size:.8rem; letter-spacing:.05em; cursor:pointer; transition:.2s; position:relative; }
.tab.active { background:linear-gradient(135deg,#6366f1,#4338ca); color:#fff; box-shadow:0 0 0 1px #6366f1aa, 0 4px 10px -2px #4338caaa; }
.tab:not(.active):hover { color:var(--text); }

button { font-family:inherit; }
button.primary { background:linear-gradient(135deg,#6366f1,#4f46e5); color:#fff; border:1px solid #6366f1; border-radius:14px; padding:.9rem 1rem; font-size:.95rem; font-weight:600; cursor:pointer; transition:.25s; position:relative; overflow:hidden; }
button.primary:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.25),transparent 60%); opacity:0; transition:.5s; }
button.primary:hover:before { opacity:1; }
button.primary:hover { transform:translateY(-2px); box-shadow:0 6px 18px -4px #6366f1aa; }
button.primary:active { transform:translateY(0); }

button.secondary { background:var(--bg-soft); color:var(--text); border:1px solid var(--border); border-radius:12px; padding:.6rem .9rem; font-size:.8rem; font-weight:500; cursor:pointer; transition:.2s; }
button.secondary:hover { border-color:#6366f1; color:#fff; }
button.secondary.small { padding:.45rem .75rem; font-size:.7rem; }

button.google-btn { display:flex; align-items:center; justify-content:center; gap:.55rem; background:#ffffff15; border:1px solid #ffffff22; color:#fff; font-weight:500; border-radius:12px; padding:.75rem .9rem; font-size:.85rem; cursor:pointer; transition:.2s; }
button.google-btn:hover { background:#ffffff25; }
button.google-btn img { width:18px; height:18px; }

.oauth-separator { display:flex; align-items:center; gap:.75rem; font-size:.65rem; text-transform:uppercase; letter-spacing:.1em; color:var(--text-dim); }
.oauth-separator:before, .oauth-separator:after { content:""; flex:1; height:1px; background:linear-gradient(90deg,transparent,#334155,transparent); }

.w-full { width:100%; }
.error-text { color:var(--danger); font-size:.75rem; min-height:1.1rem; }
.footer-note { margin-top:2rem; font-size:.7rem; letter-spacing:.05em; color:#64748b; }

/* Main View */
#main-view { flex-direction:column; min-height:100vh; }
.topbar { display:flex; align-items:center; justify-content:space-between; padding:.9rem 1.4rem; background:rgba(22,27,34,.85); backdrop-filter: blur(12px); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:50; }
.brand { display:flex; align-items:center; gap:.7rem; }
.brand h2 { font-size:1rem; font-weight:600; letter-spacing:.08em; text-transform:uppercase; background:linear-gradient(90deg,#818cf8,#10b981); -webkit-background-clip:text; background-clip:text; color:transparent; }
.logo-glow { width:12px; height:12px; border-radius:50%; background:radial-gradient(circle,#10b981,#047857); box-shadow:0 0 12px 4px #10b98188,0 0 24px 10px #10b98144; animation:pulse 3s infinite; }
@keyframes pulse { 0%,100% { transform:scale(.9); opacity:.8;} 50% { transform:scale(1.2); opacity:1;} }
.user-area { display:flex; align-items:center; gap:.8rem; }
.user-email { font-size:.7rem; color:var(--text-dim); letter-spacing:.05em; max-width:140px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; }
.content { flex:1; padding:1.6rem clamp(1rem, 3vw, 2.4rem); display:flex; flex-direction:column; gap:1.8rem; }

.devices-grid { --min:260px; display:grid; grid-template-columns:repeat(auto-fill,minmax(var(--min),1fr)); gap:1.4rem; align-content:start; }
.device-card { position:relative; background:linear-gradient(145deg,var(--bg-alt), #1f2937); border:1px solid var(--border); border-radius:20px; padding:1rem 1.05rem 1.15rem; display:flex; flex-direction:column; gap:.9rem; min-height:170px; overflow:hidden; isolation:isolate; }
.device-card:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 80% 5%,rgba(99,102,241,.25),transparent 60%); opacity:.7; pointer-events:none; }
.device-card:after { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(120deg,#6366f149,#10b98133,#6366f149); -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; }
.device-header { display:flex; align-items:center; justify-content:space-between; }
.device-name { font-weight:600; font-size:.9rem; letter-spacing:.05em; text-transform:uppercase; color:#e2e8f0; }
.status-pill { font-size:.6rem; padding:.35rem .55rem; border-radius:30px; letter-spacing:.07em; font-weight:600; background:#334155; color:#94a3b8; display:inline-flex; align-items:center; gap:.3rem; text-transform:uppercase; }
.status-pill.on { background:#10b98122; color:#10b981; }
.status-pill.off { background:#64748b33; }

.switch-wrapper { display:flex; align-items:center; gap:.9rem; }
.toggle { --h:28px; position:relative; width:60px; height:var(--h); background:#1e293b; border:1px solid #334155; border-radius:var(--h); cursor:pointer; transition:.35s cubic-bezier(.4,0,.2,1); display:flex; align-items:center; padding:2px; }
.toggle:before { content:""; position:absolute; inset:0; border-radius:inherit; background:linear-gradient(90deg,#6366f133,#10b98133); opacity:0; transition:.4s; }
.toggle-knob { width:24px; height:24px; border-radius:50%; background:linear-gradient(135deg,#1e2530,#27313f); display:grid; place-items:center; box-shadow:0 2px 6px -1px #000,0 0 0 1px #475569; color:#64748b; font-size:.65rem; font-weight:600; letter-spacing:.1em; transition:.4s cubic-bezier(.6,.2,.1,1); position:relative; z-index:2; }
.toggle.on { background:linear-gradient(90deg,#3b82f6,#6366f1); border-color:#4f46e5; box-shadow:0 4px 14px -3px #6366f1aa; }
.toggle.on:before { opacity:1; }
.toggle.on .toggle-knob { transform:translateX(32px); background:linear-gradient(135deg,#4c1d95,#6366f1); color:#fff; box-shadow:0 4px 10px -2px #4338caaa,0 0 0 1px #6366f1; }

.inline-meta { display:flex; align-items:center; gap:.5rem; font-size:.6rem; letter-spacing:.05em; color:#64748b; flex-wrap:wrap; }
.inline-meta span { display:inline-flex; align-items:center; gap:.25rem; }
.inline-meta .dot { width:4px; height:4px; background:#475569; border-radius:50%; }
.seq-badge { background:#1e293b; border:1px solid #334155; padding:.3rem .55rem; border-radius:8px; font-size:.55rem; font-weight:600; letter-spacing:.08em; color:#94a3b8; }
.seq-badge strong { color:#e2e8f0; font-weight:700; }

.actions-row { display:flex; flex-wrap:wrap; gap:.6rem; align-items:center; margin-top:auto; }
.refresh-btn { background:#1e293b; border:1px solid #334155; color:#94a3b8; font-size:.65rem; letter-spacing:.05em; font-weight:600; padding:.5rem .75rem; border-radius:10px; cursor:pointer; display:inline-flex; align-items:center; gap:.4rem; transition:.25s; }
.refresh-btn:hover { color:#fff; border-color:#6366f1; }

.latency-indicator { font-size:.55rem; font-weight:500; letter-spacing:.05em; color:#94a3b8; display:inline-flex; align-items:center; gap:.3rem; }
.latency-indicator.ok { color:#10b981; }
.latency-indicator.slow { color:#f59e0b; }

.empty-hint { text-align:center; padding:3rem 1rem; background:#111827; border:1px dashed #334155; border-radius:18px; font-size:.85rem; color:#64748b; }
.hidden { display:none !important; }

/* Toasts */
#toast-container { position:fixed; bottom:1.2rem; right:1.2rem; display:flex; flex-direction:column; gap:.75rem; z-index:200; }
.toast { background:#1e293b; border:1px solid #334155; min-width:230px; max-width:320px; padding:.85rem .95rem .9rem; border-radius:14px; font-size:.75rem; display:flex; flex-direction:column; gap:.35rem; animation:slideIn .5s cubic-bezier(.4,0,.2,1); box-shadow:0 10px 28px -8px #000; position:relative; overflow:hidden; }
.toast.success { border-color:#10b981; }
.toast.error { border-color:#ef4444; }
.toast:before { content:""; position:absolute; inset:0; background:linear-gradient(120deg,#6366f133,#10b98122,#6366f133); opacity:.4; pointer-events:none; }
.toast h4 { margin:0; font-size:.7rem; letter-spacing:.1em; text-transform:uppercase; font-weight:600; color:#94a3b8; }
.toast-close { position:absolute; top:6px; right:6px; background:transparent; border:0; color:#64748b; cursor:pointer; font-size:.8rem; }
@keyframes slideIn { from { transform:translateY(8px); opacity:0;} to { transform:translateY(0); opacity:1;} }

/* Responsive tweaks */
@media (max-width:600px) {
  .devices-grid { --min: 200px; }
  .auth-card { padding:1.6rem 1.5rem 2rem; }
  .content { padding:1.1rem 1rem 2rem; }
}
